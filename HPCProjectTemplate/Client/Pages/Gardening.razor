@page "/gardening"
@inject NavigationManager Navigation

<div class="mt-header">
     <!-- ======= Why Us Section ======= -->
    <section id="why-us" class="why-us section-bg">
      <div class="container-fluid" data-aos="fade-up">

        <div class="row">

          <div class="col-lg-7 d-flex flex-column justify-content-center align-items-stretch  order-2 order-lg-1">

            <div class="content">
              <h3>Welcome to the Gardening Community Page!</h3>
              <p>
                  Below you can find current posts. Scroll through previous posts or create your own if you need more help!
              </p>
            </div>

            <div class="accordion-list">
                <ul>
                @foreach (HPCProjectTemplate.Shared.Posts post in Posts)
                        {
                            <li>
                              <a data-bs-toggle="collapse" class="collapse" data-bs-target="#accordion-list-1"><span>@post.UserName</span> @post.Title <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                              <div id="accordion-list-1" class="collapse show" data-bs-parent=".accordion-list">
                                <p>
                                  @post.Content
                                  <br><br>
                                  <input type="button" value="Reply" @onclick="() => Reply(post.Id, post.Title, post.Content)" />
                                </p>
                              </div>
                            </li>
                        }
                

                

           

              </ul>
            </div>

          </div>

        </div>

      </div>
    </section><!-- End Why Us Section -->
    <h3>Welcome to the Gardening Q&A!</h3>

<input type="button" value="Create Post" @onclick="() => CreatePost()" />
<table class="table table-hover" id="forumIndexTable">
    <tr>
        <th></th>
        <th>Title</th>
        <th>Post</th>
        <th>Post Created On</th>
        <th>Posted By</th>
    </tr>
    <tbody>
        @foreach (HPCProjectTemplate.Shared.Posts post in Posts)
        {
            <tr>
                <td>
                    @post.ImageUrl
                </td>
                <td>
                    @post.Title
                </td>
                <td>
                    @post.Content
                </td>
                <td>
                    @post.Created
                </td>
                <td>
                    @post.UserName
                </td>
                <td>
                    <input type="button" value="Reply" @onclick="() => Reply(post.Id, post.Title, post.Content)" />
                </td>
            </tr>
        }
    </tbody>
</table>
</div>


@code {
    private void Reply(int id, string title, string content)
    {
        string reply = "Re: " + title + " - " + content;
        Navigation.NavigateTo($"/reply/{id}/{reply}");
    }
    private void CreatePost()
    {
        Navigation.NavigateTo("/create/post");
    }

}
