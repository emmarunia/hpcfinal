@page "/community/outdoor/plants"
@inject NavigationManager Navigation

<div class="mt-header">
     <!-- ======= Why Us Section ======= -->
    <section id="why-us" class="why-us section-bg">
      <div class="container-fluid">

         <div class="section-title">
          <h2>Outdoor Plants Community Page</h2>
          <p>Below you can find current posts. Scroll through previous posts or create your own if you need more help!</p>
          <p>
              <a href="javascript:void(0)" class="btn-learn-more ms-3" @onclick="CreatePost">Create Post</a>
          </p>
          
        </div>

        <div class="row">

          <div class="col-lg d-flex flex-column justify-content-center align-items-stretch  order-2 order-lg-1">

           
            <div class="accordion-list">
                <ul>
                @{
                    int i = 1;
                }
                @foreach (var post in Posts)
                        {
                            
                            <li>
                              <a data-bs-toggle="collapse" class="collapse" data-bs-target="#accordion-list-@i"><span>@post.UserName</span> @post.Title <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                              <div id="accordion-list-@i" class="collapse show" data-bs-parent=".accordion-list">
                               
                                    Post added on: @post.Created
                                  <p>
                                    @post.Content
                                  </p>

                                  <a href="javascript:void(0)" class="btn-learn-more" @onclick="() => Reply(post.Id, post.Title, post.Content)"><span class="bx bx-reply" />Reply</a>

                                
                              </div>
                                </li>
                                i++;

                        }
                

       
           

              </ul>
            </div>

          </div>

        </div>

      </div>
    </section><!-- End Why Us Section -->

</div>


@code {
    private void Reply(int id, string title, string content)
    {
        string reply = "Re: " + title + " - " + content;
        Navigation.NavigateTo($"/reply/{id}/{reply}");
    }
    private void CreatePost()
    {
        Navigation.NavigateTo("/create/post");
    }

}
